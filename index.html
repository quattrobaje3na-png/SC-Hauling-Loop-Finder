<div class="form-section">
    <h3>Pickup Information</h3>
    <div class="input-group">
        <label for="pickup-location">Pickup Location (e.g., ArcCorp Mining Area 048)</label>
        <select id="pickup-location" class="location-select"></select>
    </div>
    <div class="input-group">
        <label for="total-scu">Total SCU Cargo</label>
        <input type="number" id="total-scu" placeholder="e.g., 64" oninput="updateSplits()">
    </div>
</div>

<div class="form-section" id="delivery-container">
    <h3>Delivery Destinations</h3>
    
    <div class="delivery-zone" id="zone-1">
        <div class="zone-header">
            <span>Destination 1</span>
        </div>
        <select class="location-select" id="dest-1"></select>
        <div class="scu-input-wrap">
            <input type="number" class="scu-split" id="scu-1" placeholder="SCU" oninput="syncSplits(1)">
            <span class="unit">SCU</span>
        </div>
    </div>

    <button type="button" id="add-zone-btn" onclick="toggleSecondZone()">+ Add Split Delivery</button>

    <div class="delivery-zone" id="zone-2" style="display: none;">
        <div class="zone-header">
            <span>Destination 2</span>
            <button type="button" class="remove-btn" onclick="toggleSecondZone()">Remove</button>
        </div>
        <select class="location-select" id="dest-2"></select>
        <div class="scu-input-wrap">
            <input type="number" class="scu-split" id="scu-2" placeholder="SCU" oninput="syncSplits(2)">
            <span class="unit">SCU</span>
        </div>
    </div>
</div>

<script>
    let splitActive = false;

    function toggleSecondZone() {
        const zone2 = document.getElementById('zone-2');
        const btn = document.getElementById('add-zone-btn');
        splitActive = !splitActive;
        
        zone2.style.display = splitActive ? 'block' : 'none';
        btn.style.display = splitActive ? 'none' : 'block';
        
        if (splitActive) updateSplits(); // Auto-calculate 50/50 split on open
    }

    function updateSplits() {
        const total = parseFloat(document.getElementById('total-scu').value) || 0;
        if (splitActive) {
            document.getElementById('scu-1').value = total / 2;
            document.getElementById('scu-2').value = total / 2;
        } else {
            document.getElementById('scu-1').value = total;
        }
    }

    function syncSplits(changedSource) {
        const total = parseFloat(document.getElementById('total-scu').value) || 0;
        if (!splitActive) return;

        if (changedSource === 1) {
            const val1 = parseFloat(document.getElementById('scu-1').value) || 0;
            document.getElementById('scu-2').value = Math.max(0, total - val1);
        } else {
            const val2 = parseFloat(document.getElementById('scu-2').value) || 0;
            document.getElementById('scu-1').value = Math.max(0, total - val2);
        }
    }
</script>
